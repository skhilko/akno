!function(a,b,c,d){"use strict";function e(){var a,b={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",msTransition:"MSTransitionEnd",OTransition:"oTransitionEnd"};for(a in b)if(c.body.style[a]!==d)return b[a]}function f(a){return"hidden"!==b.getComputedStyle(a).visibility?a.offsetWidth>0&&a.offsetHeight>0:void 0}function g(){var a=c.documentElement,b=c.body;return"hidden"!==b.style.overflow&&a.scrollHeight>a.clientHeight}function h(a){return!a||"visibility"===a.propertyName&&a.target.classList.contains("akno-dialog")}function i(a,b){for(var c=[],d=a.querySelectorAll("input,select,button,textarea,object,a"),e=0,g=d.length;g>e;e++){var h=d[e],i=h.tabIndex>=0;if(f(h)){var j=h.nodeName.toLowerCase();"a"===j?(i||h.href.length)&&c.push(h):i&&!h.disabled&&c.push(h)}if(b&&1===c.length)return c}return c}function j(a){var b=i(a,!0);return b.length?(b[0].focus(),!0):void 0}function k(a,b){var c,e={};for(c in a)a.hasOwnProperty(c)&&(e[c]=a[c]);for(c in b)b.hasOwnProperty(c)&&e[c]===d&&(e[c]=b[c]);return e}function l(){return""+p++}function m(a){var b=a[t];return b||(b=l(),a[t]=b),b}function n(a,b){this._handlers={},this.options=k(b,n.defaults),this.element=a,this._isAnimated=this.options.effect in v,this._createOverlay(),this._render(),this._on("click",this.dialog,this._closeClickHandler),this._on("keydown",this.dialog,this._escKeyHandler),this._on("keydown",this.dialog,this._tabKeyHandler),w++,this.options.open&&this.open()}function o(a,b){this.element=a,this.options=b,this.init()}var p=1,q=e(),r=27,s=9,t="aknouid",u=function(){var a=c.createElement("div");a.style.cssText="width:90px;height:90px;overflow:scroll;position:absolute;top:-9999px;",c.body.appendChild(a);var b=a.offsetWidth-a.clientWidth;return c.body.removeChild(a),b}(),v={"scale-up":"akno-fx-scale-up","slide-in-right":"akno-fx-slide-in-right","slide-in-bottom":"akno-fx-slide-in-bottom",newspaper:"akno-fx-newspaper",fall:"akno-fx-fall","side-fall":"akno-fx-side-fall","sticky-top":"akno-fx-sticky-top","flip-hor":"akno-fx-flip-hor","flip-vert":"akno-fx-flip-vert",sign:"akno-fx-sign","scale-down":"akno-fx-scale-down","just-me":"akno-fx-just-me",slit:"akno-fx-slit","rotate-bottom":"akno-fx-rotate-bottom","rotate-left":"akno-fx-rotate-left"},w=0,x=0;n.prototype.open=function(){if(!this._isOpen()){var a=!this._trigger("akno-before-open");if(!a){if(!x&&(this.hasViewportScroll=g(),this.hasViewportScroll)){var b=c.body.style;this._overrides.body={paddingRight:b.paddingRight,overflow:b.overflow},b.paddingRight=u+"px",b.overflow="hidden"}var d=this.dialog;this._isAnimated?(this._on(q,d,this._open),setTimeout(function(){d.classList.add("akno-state-open")},0)):(d.classList.add("akno-state-open"),this._open())}}},n.prototype._open=function(a){h(a)&&(this._off(q,this.dialog,this._open),this._initFocus(),x++,this._trigger("akno-open"))},n.prototype.close=function(){if(this._isOpen()){var a=!this._trigger("akno-before-close");a||(this._stateClosing=!0,this._lastActive&&(this._lastActive.focus(),this._lastActive!==c.activeElement&&c.activeElement.blur(),this._lastActive=null),this._isAnimated?(this._on(q,this.dialog,this._close),this.dialog.classList.remove("akno-state-open")):(this.dialog.classList.remove("akno-state-open"),this._close()))}},n.prototype._close=function(a){if(h(a)){if(this._off(q,this.dialog,this._close),1===x&&this.hasViewportScroll){var b=c.body.style,d=this._overrides.body;b.paddingRight=d.paddingRight,b.overflow=d.overflow}x--,this._stateClosing=!1,this._trigger("akno-close")}},n.prototype.destroy=function(){this._stateClosing?this._on(q,this.dialog,this._destroy):this._isOpen()?(this.close(),this._isAnimated?this._on(q,this.dialog,this._destroy):this._destroy()):this._destroy()},n.prototype._destroy=function(a){if(h(a)){var b=this._overrides,d=this.element;b.hasOwnProperty("display")&&(d.style.display=b.display),b.parent.insertBefore(d,b.next),this._handlers=null,this._destroyOverlay(),c.body.removeChild(this.dialog),this.dialog=null,n.zIndex--,w--}},n.prototype._isOpen=function(){return this.dialog.classList.contains("akno-state-open")},n.prototype._render=function(){var a=this.element,b=this.options,d=b.buttons,e=this.hasButtons=!(!d||!d.length);this._overrides={parent:a.parentNode,next:a.nextElementSibling};var f=getComputedStyle(a).getPropertyValue("display");"none"===f&&(this._overrides.display=a.style.display);var g=c.createElement("div");if(g.innerHTML=y.dialog({header:b.header,effect:v[b.effect],hasButtons:e}),g.querySelector(".akno-body").appendChild(a),e){var h=g.querySelector(".akno-footer");d.forEach(function(a){var b=c.createElement("button");b.type="button",b.textContent=a.text,a.className&&(b.className=a.className),a.action&&b.addEventListener("click",a.action.bind(this)),h.appendChild(b)},this)}"none"===f&&(a.style.display="block"),this.dialog=c.body.insertBefore(g.firstChild,c.body.firstChild),this.dialog.style.zIndex=n.zIndex++,this.dialog.offsetHeight},n.prototype._on=function(a,b,c){if(a&&b){var d=m(c),e=m(b);c=c.bind(this),c[t]=d;var f=this._handlers[e];f&&f.length||(f=[],this._handlers[e]=f),f.push({eventName:a,handler:c}),b.addEventListener(a,c)}},n.prototype._off=function(a,b,c){var d,e=this._handlers[m(b)];if(e)for(var f=0,g=e.length;g>f;f++)d=e[f],d.eventName===a&&m(d.handler)===m(c)&&(b.removeEventListener(a,d.handler),e.splice(f,1),g--)},n.prototype._trigger=function(a){var b=c.createEvent("CustomEvent");return b.initEvent(a,!0,!0),this.element.dispatchEvent(b)},n.prototype._createOverlay=function(){var a;w?a=c.getElementById("akno_overlay"):(a=c.createElement("div"),a.id="akno_overlay",a.style.zIndex=n.zIndex++,a.className="akno-overlay",c.body.appendChild(a)),this.overlay=a},n.prototype._initFocus=function(){var a=this.dialog;this._lastActive=c.activeElement;var b=this.element.querySelector("[autofocus]");if(b)return void b.focus();if(!(j(this.element)||this.hasButtons&&j(a.querySelector(".akno-footer")))){var d=a.querySelector(".akno-action-close");return d&&f(d)?void d.focus():void a.focus()}},n.prototype._destroyOverlay=function(){1===w&&(c.body.removeChild(this.overlay),this.overlay=null,n.zIndex--)},n.prototype._escKeyHandler=function(a){return a.keyCode===r?(a.preventDefault(),void this.close()):void 0},n.prototype._closeClickHandler=function(a){a.target.classList.contains("akno-action-close")&&this.close()},n.prototype._tabKeyHandler=function(a){if(a.keyCode===s){var b=i(this.dialog);if(b.length){var c=b[0],d=b[b.length-1];a.target!==d&&a.target!==this.dialog||a.shiftKey?a.target!==c&&a.target!==this.dialog||!a.shiftKey||(d.focus(),a.preventDefault()):(c.focus(),a.preventDefault())}else this.dialog.focus()}},n.defaults={effect:"scale-up",open:!0},n.zIndex=10;var y=function(){function a(){var a={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},b=/&(?!#?w+;)|<|>|"|'|\//g;return function(){return this?this.replace(b,function(b){return a[b]||b}):this}}String.prototype.encodeHTML=a();var b={};return b.dialog=function(a){var b='<div class="akno-dialog '+(a.effect||"")+'" tabindex="-1"><div class="akno-content"><div class="akno-header"><button type="button" class="akno-action-close">Ã—</button>';return a.header&&(b+="<h2>"+(a.header||"").toString().encodeHTML()+"</h2>"),b+='</div><div class="akno-body"></div>',a.hasButtons&&(b+='<div class="akno-footer"></div>'),b+="</div></div>"},b}();b.Akno=n;var z="akno";o.prototype.init=function(){this.akno=new n(this.element,this.options)},o.prototype.destroy=function(){this.akno.destroy(),a.removeData(this.element,"plugin_"+z),this.element=null},a.fn[z]=function(b){var c=arguments,e="plugin_"+z;return b===d||"object"==typeof b?this.each(function(){a.data(this,e)||a.data(this,e,new o(this,b))}):"string"==typeof b&&"_"!==b[0]&&"init"!==b?this.each(function(){var d=a.data(this,e);d instanceof o&&(!a.isFunction(d[b])&&a.isFunction(d.akno[b])&&(d=d.akno),d[b].apply(d,Array.prototype.slice.call(c,1)))}):void 0}}(jQuery,window,window.document);