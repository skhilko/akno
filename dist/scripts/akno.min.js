!function(a,b,c){"use strict";function d(){var a,d={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",msTransition:"MSTransitionEnd",OTransition:"oTransitionEnd"};for(a in d)if(b.body.style[a]!==c)return d[a]}function e(b){return"hidden"!==a.getComputedStyle(b).visibility?b.offsetWidth>0&&b.offsetHeight>0:void 0}function f(){var a=b.documentElement,c=b.body;return"hidden"!==c.style.overflow&&a.scrollHeight>a.clientHeight}function g(a){return!a||"visibility"===a.propertyName&&a.target.classList.contains("akno-modal")}function h(a,b){for(var c=[],d=a.querySelectorAll("input,select,button,textarea,object,a"),f=0,g=d.length;g>f;f++){var h=d[f],i=h.tabIndex>=0;if(e(h)){var j=h.nodeName.toLowerCase();"a"===j?(i||h.href.length)&&c.push(h):i&&!h.disabled&&c.push(h)}if(b&&1===c.length)return c}return c}function i(a){var b=a.querySelector("[autofocus]");if(b)return void b.focus();var c=h(a,!0);return c.length?void c[0].focus():void a.focus()}function j(a,b){var d,e={};for(d in a)a.hasOwnProperty(d)&&(e[d]=a[d]);for(d in b)b.hasOwnProperty(d)&&e[d]===c&&(e[d]=b[d]);return e}function k(){return""+n++}function l(a){var b=a[r];return b||(b=k(),a[r]=b),b}function m(a,b){this._handlers={},this.options=j(b,m.defaults),this.element=a,this._isAnimated=this.options.effect in t,this._createOverlay(),this._render(),this.closeButton=a.querySelector(".akno-action-close"),this._on("click",this.closeButton,this.close),this._on("keydown",this.dialog,this._escKeyHandler),this._on("keydown",this.dialog,this._tabKeyHandler),u++,this.options.open&&this.open()}var n=1,o=d(),p=27,q=9,r="aknouid",s=function(){var a=b.createElement("div");a.style.cssText="width:90px;height:90px;overflow:scroll;position:absolute;top:-9999px;",b.body.appendChild(a);var c=a.offsetWidth-a.clientWidth;return b.body.removeChild(a),c}(),t={"scale-up":"akno-fx-scale-up","slide-in-right":"akno-fx-slide-in-right","slide-in-bottom":"akno-fx-slide-in-bottom",newspaper:"akno-fx-newspaper",fall:"akno-fx-fall","side-fall":"akno-fx-side-fall","sticky-top":"akno-fx-sticky-top","flip-hor":"akno-fx-flip-hor","flip-vert":"akno-fx-flip-vert",sign:"akno-fx-sign","scale-down":"akno-fx-scale-down","just-me":"akno-fx-just-me",slit:"akno-fx-slit","rotate-bottom":"akno-fx-rotate-bottom","rotate-left":"akno-fx-rotate-left"},u=0,v=0;m.prototype.open=function(){if(!this._isOpen()){var a=!this._trigger("akno-before-open");if(!a){if(!v&&(this.hasViewportScroll=f(),this.hasViewportScroll)){var c=b.body.style;this._overrides.body={paddingRight:c.paddingRight,overflow:c.overflow},c.paddingRight=s+"px",c.overflow="hidden"}if(this._isAnimated){this._on(o,this.dialog,this._open);var d=this.dialog;setTimeout(function(){d.classList.add("akno-state-visible")},0)}else this.dialog.classList.add("akno-state-visible"),this._open()}}},m.prototype._open=function(a){g(a)&&(this._off(o,this.dialog,this._open),this._initFocus(),v++,this._trigger("akno-open"))},m.prototype.close=function(){if(this._isOpen()){var a=!this._trigger("akno-before-close");a||(this._stateClosing=!0,this._lastActive&&(this._lastActive.focus(),this._lastActive!==b.activeElement&&b.activeElement.blur(),this._lastActive=null),this._isAnimated?(this._on(o,this.dialog,this._close),this.dialog.classList.remove("akno-state-visible")):(this.dialog.classList.remove("akno-state-visible"),this._close()))}},m.prototype._close=function(a){if(g(a)){if(this._off(o,this.dialog,this._close),1===v&&this.hasViewportScroll){var c=b.body.style,d=this._overrides.body;c.paddingRight=d.paddingRight,c.overflow=d.overflow}v--,this._stateClosing=!1,this._trigger("akno-close")}},m.prototype.destroy=function(){this._stateClosing?this._on(o,this.dialog,this._destroy):this._isOpen()?(this.close(),this._isAnimated?this._on(o,this.dialog,this._destroy):this._destroy()):this._destroy()},m.prototype._destroy=function(a){if(g(a)){var c=this._overrides,d=this.element;c.hasOwnProperty("display")&&(d.style.display=c.display),c.parent.insertBefore(d,c.next),this._handlers=null,this._destroyOverlay(),b.body.removeChild(this.dialog),m.zIndex--,u--}},m.prototype._isOpen=function(){return this.dialog.classList.contains("akno-state-visible")},m.prototype._render=function(){var a=this.element;this._overrides={parent:a.parentNode,next:a.nextElementSibling};var c=getComputedStyle(a).getPropertyValue("display");"none"===c&&(this._overrides.display=a.style.display);var d=b.createElement("div");d.innerHTML=w.dialog({header:this.options.header,effect:t[this.options.effect]});var e=d.querySelector(".akno-body");e.appendChild(a),"none"===c&&(a.style.display="block"),this.content=e,this.dialog=b.body.insertBefore(d.firstChild,b.body.firstChild),this.dialog.style.zIndex=m.zIndex++,this.dialog.offsetHeight},m.prototype._on=function(a,b,c){if(a&&b){var d=l(c),e=l(b);c=c.bind(this),c[r]=d;var f=this._handlers[e];f&&f.length||(f=[],this._handlers[e]=f),f.push({eventName:a,handler:c}),b.addEventListener(a,c)}},m.prototype._off=function(a,b,c){var d,e=this._handlers[l(b)];if(e)for(var f=0,g=e.length;g>f;f++)d=e[f],d.eventName===a&&l(d.handler)===l(c)&&(b.removeEventListener(a,d.handler),e.splice(f,1),g--)},m.prototype._trigger=function(a){var c=b.createEvent("CustomEvent");return c.initEvent(a,!0,!0),this.element.dispatchEvent(c)},m.prototype._createOverlay=function(){var a;u?a=b.getElementById("akno_overlay"):(a=b.createElement("div"),a.id="akno_overlay",a.style.zIndex=m.zIndex++,a.className="akno-overlay",b.body.appendChild(a)),this.overlay=a},m.prototype._initFocus=function(){this._lastActive=b.activeElement,i(this.dialog)},m.prototype._destroyOverlay=function(){1===u&&(b.body.removeChild(this.overlay),m.zIndex--)},m.prototype._escKeyHandler=function(a){return a.keyCode===p?(a.preventDefault(),void this.close()):void 0},m.prototype._tabKeyHandler=function(a){if(a.keyCode===q){var b=h(this.content);if(b.length){var c=b[0],d=b[b.length-1];a.target!==d&&a.target!==this.dialog||a.shiftKey?a.target!==c&&a.target!==this.dialog||!a.shiftKey||(d.focus(),a.preventDefault()):(c.focus(),a.preventDefault())}else this.dialog.focus()}},m.defaults={effect:"scale-up",open:!0},m.zIndex=10;var w=function(){function a(){var a={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},b=/&(?!#?w+;)|<|>|"|'|\//g;return function(){return this?this.replace(b,function(b){return a[b]||b}):this}}String.prototype.encodeHTML=a();var b={};return b.dialog=function(a){var b='<div class="akno-modal '+(a.effect||"")+'" tabindex="-1"><div class="akno-content">';return a.header&&(b+="<h1>"+(a.header||"").toString().encodeHTML()+"</h1>"),b+='<div class="akno-body"></div></div></div>'},b}();a.Akno=m}(window,window.document);